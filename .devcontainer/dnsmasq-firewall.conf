# dnsmasq configuration for nftables firewall integration
# This file enables automatic IP resolution and nftset population for wildcard domains

# Basic dnsmasq settings for firewall use
port=0
bind-interfaces
no-resolv
no-poll

# Use system DNS servers for upstream resolution
server=8.8.8.8
server=8.8.4.4
server=1.1.1.1

# Cache settings for better performance
cache-size=1000
neg-ttl=60

# Wildcard domain configurations with nftset integration
# Format: nftset=/domain/[4|6]#[family]#[table]#[set]

# VS Code wildcard domains (*.domain)
# Allow all subdomains of vscode-unpkg.net (e.g., *.vscode-unpkg.net)  
nftset=/vscode-unpkg.net/4#inet#firewall#allowed_domains_v4
nftset=/vscode-unpkg.net/6#inet#firewall#allowed_domains_v6

# Visual Studio Marketplace wildcard domains
nftset=/gallery.vsassets.io/4#inet#firewall#allowed_domains_v4
nftset=/gallery.vsassets.io/6#inet#firewall#allowed_domains_v6
nftset=/gallerycdn.vsassets.io/4#inet#firewall#allowed_domains_v4
nftset=/gallerycdn.vsassets.io/6#inet#firewall#allowed_domains_v6

# VS Code CDN wildcard domains
nftset=/vscode-cdn.net/4#inet#firewall#allowed_domains_v4
nftset=/vscode-cdn.net/6#inet#firewall#allowed_domains_v6

# Logging configuration for debugging
log-queries
log-dhcp