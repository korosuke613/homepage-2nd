# 実装計画

- [ ] 1. MobileTocコンポーネントの作成
  - [ ] 1.1 MobileToc.tsxコンポーネントファイルを作成
    - 折りたたみ機能付きのモバイル専用目次コンポーネントを実装
    - useState hookを使用した表示/非表示状態管理
    - 既存のTocコンポーネントのロジックを再利用
    - _要件: 2.1, 2.2, 2.3_

  - [ ] 1.2 MobileTocコンポーネントのスタイリング実装
    - Tailwind CSSを使用したモバイル向けレスポンシブスタイル
    - 折りたたみボタンのデザイン実装
    - 目次項目のリストスタイリング
    - _要件: 2.2, 4.1, 4.2_

  - [ ] 1.3 MobileTocの折りたたみ機能実装
    - 目次ボタンクリック時の表示/非表示切り替え機能
    - 目次項目クリック後の自動折りたたみ機能
    - スムーズなアニメーション効果の追加
    - _要件: 2.3, 2.4_

- [ ] 2. Content.tsxコンポーネントの更新
  - [ ] 2.1 モバイル用インライン目次の追加
    - MobileTocコンポーネントをインポート
    - モバイル・タブレット用の目次表示エリアを追加（`block lg:hidden mb-8`）
    - 既存のheadingsプロパティをMobileTocに渡す
    - _要件: 2.1, 2.2_

  - [ ] 2.2 デスクトップ用TOCレイアウトの修正
    - 既存のTOCコンテナのTailwind CSSクラスを更新
    - `invisible lg:visible lg:fixed lg:right-4 lg:top-40 lg:max-w-[200px] lg:z-10 xl:right-10 xl:max-w-xs`に変更
    - 重複防止のための配置調整とz-index設定
    - _要件: 1.1, 1.2, 3.1, 3.2_

- [ ] 3. コンポーネントテストの実装
  - [ ] 3.1 MobileTocコンポーネントのテスト作成
    - 折りたたみ機能の動作テスト
    - 目次項目クリック時の自動折りたたみテスト
    - モバイル画面での表示確認テスト
    - _要件: 2.1, 2.3, 2.4_

  - [ ] 3.2 レスポンシブ動作のテスト実装
    - モバイル画面（375px）でのインライン目次表示テスト
    - タブレット画面（768px）でのインライン目次表示テスト
    - デスクトップ画面（1024px, 1280px）での固定目次表示テスト
    - _要件: 2.1, 3.1, 3.2, 3.3_

- [ ] 4. ビジュアルリグレッションテストの更新
  - [ ] 4.1 モバイル目次のVRTスナップショット作成
    - モバイル（375px）での折りたたみ状態スナップショット
    - モバイル（375px）での展開状態スナップショット
    - タブレット（768px）でのインライン目次スナップショット
    - _要件: 2.1, 2.2_

  - [ ] 4.2 デスクトップTOCのVRTスナップショット更新
    - lg（1024px）での修正されたTOC配置スナップショット
    - xl（1280px）での最適化されたTOC配置スナップショット
    - 2xl（1536px）での余裕のある配置スナップショット
    - _要件: 1.1, 3.1, 3.2_

  - [ ] 4.3 重複検証テストの追加
    - TOCとメインコンテンツの重複がないことを検証
    - 各ブレークポイントでの適切な配置確認
    - _要件: 1.1, 1.2, 3.2_

- [ ] 5. 統合テストと最終検証
  - [ ] 5.1 全画面サイズでの動作確認
    - モバイルからデスクトップまでの連続的な動作テスト
    - ビューポートサイズ変更時の適切な切り替え確認
    - _要件: 3.1, 3.2, 3.3, 3.4_

  - [ ] 5.2 エッジケースの検証
    - 非常に長い目次項目での表示テスト
    - 目次項目が多数ある場合の動作テスト
    - 異なるコンテンツ長での目次表示テスト
    - _要件: 1.3, 2.3, 4.3_
