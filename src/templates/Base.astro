---
import '@docsearch/css/dist/style.css';
import '@/components/DocSearch.css';
// eslint-disable-next-line import/no-unresolved
import { ViewTransitions } from 'astro:transitions';

import path from 'path';

import { Footer } from '@/partials/Footer';
import Navbar from '@/templates/Navbar.astro';
import { AppConfig } from '@/utils/AppConfig';

export interface Props {
  head: {
    title: string;
    description: string;
    ogpUrl?: string;
  };
}

const {
  head: { title, description },
} = Astro.props as Props;

const twitterCardType = Astro.props.head.ogpUrl
  ? 'summary_large_image'
  : 'summary';
const ogpUrl = Astro.props.head.ogpUrl
  ? Astro.props.head.ogpUrl
  : new URL(
      'assets/images/my_icon_2.png',
      'https://korosuke613.dev/',
    ).toString();

const rssLink = path.join(AppConfig.base, 'rss.xml');
const faviconLink = path.join(AppConfig.base, 'favicon.ico');
---

<html lang="ja">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CJQ7CKRTGR"
    ></script>
    <script is:global>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-CJQ7CKRTGR');
    </script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="author" content={AppConfig.author} />
    <meta name="twitter:card" content={twitterCardType} />
    <meta name="twitter:site" content="shitimi_613" />
    <meta name="og:title" content={title} />
    <meta name="og:description" content={description} />
    <meta name="og:image" content={ogpUrl} />

    <link rel="alternate" type="application/rss+xml" href={rssLink} />
    <link rel="icon" type="image/x-icon" href={faviconLink} />

    <ViewTransitions />
  </head>

  <body class="bg-slate-900 text-gray-100">
    <Navbar />

    <slot />

    <Footer />
  </body>
</html>
